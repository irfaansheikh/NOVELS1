/*1361249088,173213983*/

if (self.CavalryLogger) { CavalryLogger.start_js(["QVJ60"]); }

__d("SubscriptionLevels",[],function(a,b,c,d,e,f){var g={ALL:'162318810514679',DEFAULT:'271670892858696',TOP:'266156873403755'};e.exports=g;});
__d("EditSubscriptions",["Event","function-extensions","Arbiter","AsyncRequest","CSS","DOM","ge","Menu","Parent","SubscriptionLevels"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('ge'),m=b('Menu'),n=b('Parent'),o=b('SubscriptionLevels'),p=13,q=45,r=[o.ALL,o.DEFAULT,o.TOP],s={},t={},u={},v={},w={},x={},y={},z={},aa={},ba={},ca={},da="/ajax/follow/follow_profile.php",ea="/ajax/follow/unfollow_profile.php",fa="/ajax/settings/notifications/notify_me.php",ga={},ha={},ia=null,ja=false;function ka(hb){return r.contains(hb);}function la(hb,ib,jb,kb){var lb=n.byClass(kb,'uiMenuItem')||n.byClass(kb,'uiMenuXItem');if(!lb||!k.contains(hb,lb)){return;}else if(j.hasClass(lb,'SubscribeMenuSubscribeCheckbox')){if(u[ib]){oa(hb,ib);}else na(hb,ib);return false;}else if(j.hasClass(lb,'SubscribeMenuUnsubscribe')){oa(hb,ib);return false;}else if(j.hasClass(lb,'SubscribeMenuSettingsItem')){bb(hb,true);return false;}else if(j.hasClass(lb,'SubscriptionMenuGoBack')){bb(hb,false);return false;}else if(j.hasClass(lb,'SubscriptionMenuItem')){ma(hb,ib,jb,lb);return false;}else if(j.hasClass(lb,'SubscribeMenuNotifyMeCheckbox')){if(v[ib]){fb(hb,ib);}else eb(hb,ib);return false;}}function ma(hb,ib,jb,kb){if(j.hasClass(kb,'SubscriptionMenuLevel')){if(m.isItemChecked(kb))return;za(hb,ib,sa(kb),true,jb);}else if(j.hasClass(kb,'SubscriptionMenuCategory')){wa(ib,kb,!m.isItemChecked(kb),true,jb);}else if(j.hasClass(kb,'SubscriptionAppStory'))ya(ib,kb,!m.isItemChecked(kb),jb);}function na(hb,ib){var jb={profile_id:ib};h.inform('FollowingUser',jb);new i().setURI(da).setMethod('POST').setData({profile_id:ib,location:pa(hb)}).setErrorHandler(h.inform.curry('FollowUserFail',jb)).send();}function oa(hb,ib){var jb={profile_id:ib};h.inform('UnfollowingUser',jb);new i().setURI(ea).setMethod('POST').setData({profile_id:ib,location:pa(hb)}).setErrorHandler(h.inform.curry('UnfollowUserFail',jb)).send();}function pa(hb){if(j.hasClass(hb,'followButtonFlyout')){return p;}else return q;}function qa(hb,ib,jb){var kb={profile_id:hb,level:z[hb],custom_categories:aa[hb],location:jb};new i().setURI('/ajax/follow/manage_subscriptions.php').setData(kb).send();}function ra(hb,ib){var jb=aa[ib]||[],kb=m.getItems(hb);kb.forEach(function(lb){if(j.hasClass(lb,'SubscriptionMenuCategory')){var mb=sa(lb);if(jb.contains(mb)){ua(lb);}else va(lb);}else if(j.hasClass(lb,'SubscriptionAppStory')){var nb=sa(lb);if(ha[ib]&&ha[ib][nb]){ua(lb);}else va(lb);}});za(hb,ib,z[ib],false);}function sa(hb){var ib=k.scry(hb,'input')[0];return ib&&ib.value;}function ta(hb){return k.find(hb,'a.itemAnchor');}function ua(hb){j.addClass(hb,'checked');ta(hb).setAttribute('aria-checked',true);}function va(hb){j.removeClass(hb,'checked');ta(hb).setAttribute('aria-checked',false);}function wa(hb,ib,jb,kb,lb){if(jb){ua(ib);}else va(ib);var mb=sa(ib);if(ka(mb)){jb&&xa(hb,mb);}else if(jb){if(!aa[hb].contains(mb))aa[hb].push(mb);}else{var nb=aa[hb].indexOf(mb);if(nb!==-1)aa[hb].splice(nb,1);}if(kb)qa(hb,mb,lb);}function xa(hb,ib){z[hb]=ib;h.inform('SubscriptionLevelUpdated',{profile_id:hb,level:ib});}function ya(hb,ib,jb,kb){var lb='/ajax/feed/filter_action/',mb=sa(ib),nb={actor_id:hb,app_id:mb};if(jb){ua(ib);lb+='resubscribe_user_app/';nb.action='resubscribe_user_app';if(!ha[hb])ha[hb]={};ha[hb][mb]=true;}else{va(ib);lb+='unsubscribe_user_app_checkbox/';nb.action='unsubscribe_user_app_checkbox';if(ha[hb])ha[hb][mb]=false;}new i().setURI(lb).setData(nb).send();}function za(hb,ib,jb,kb,lb){var mb=k.scry(hb,'.SubscriptionMenuLevel'),nb=null;mb.forEach(function(ob){if(sa(ob)==jb){nb=ob;}else if(m.isItemChecked(ob))wa(ib,ob,false,false);});nb&&wa(ib,nb,true,kb,lb);}function ab(hb,ib,jb){u[ib]=jb;j.conditionClass(hb,'isUnsubscribed',!jb);var kb=k.scry(hb,'li.SubscribeMenuSubscribeCheckbox');if(kb.length!==0){var lb=kb[0];if(jb){ua(lb);}else va(lb);}}function bb(hb,ib){j.conditionClass(hb,'subscriptionMenuOpen',ib);}function cb(hb,ib,jb){var kb=k.find(hb,".FriendListSubscriptionsMenu"),lb=k.find(kb,".uiMenuInner");if(ia!=null)ia.forEach(function(mb){lb.removeChild(mb);});jb.forEach(function(mb){lb.appendChild(mb);});ia=jb;}h.subscribe('UnfollowUser',function(hb,ib){if(ba[ib.profile_id]){xa(ib.profile_id,ba[ib.profile_id]);aa[ib.profile_id]=ca[ib.profile_id].slice();}});h.subscribe('UpdateSubscriptionLevel',function(hb,ib){var jb=ib.profile_id+'',kb=ib.level+'';xa(jb,kb);var lb;for(lb in s)if(s[lb]===jb){var mb=l(lb);mb&&za(mb,jb,kb,false);}});function db(hb,ib,jb){v[ib]=jb;var kb=x[ib]&&!ja,lb=k.scry(hb,'li.SubscribeMenuNotifyMeCheckbox');if(lb.length!==0){var mb=lb[0];j.conditionShow(mb,!kb);j.conditionShow(k.find(hb,'li.SubscribeMenuNotifyMeCheckboxSeparator'),!kb);if(jb){ua(mb);}else va(mb);}}function eb(hb,ib){var jb={profile_id:ib};h.inform('EnableNotifsForUser',jb);new i().setURI(fa).setMethod('POST').setData({notifier_id:ib,enable:true}).setErrorHandler(h.inform.curry('EnableNotifsForUserFail',jb)).send();}function fb(hb,ib){var jb={profile_id:ib};h.inform('DisableNotifsForUser',jb);new i().setURI(fa).setMethod('POST').setData({notifier_id:ib,enable:false}).setErrorHandler(h.inform.curry('DisableNotifsForUserFail',jb)).send();}var gb={init:function(hb,ib,jb){var kb=k.getID(hb);if(!s[kb])g.listen(hb,'click',function(lb){return la(hb,s[kb],jb,lb.getTarget());});if(jb===q&&ga[ib].length)cb(hb,ib,ga[ib]);if(z[ib])ra(hb,ib);s[kb]=ib;j.conditionClass(hb,'NonFriendSubscriptionMenu',!t[ib]);j.conditionClass(hb,'cannotSubscribe',!w[ib]);j.conditionClass(hb,'noSubscriptionLevels',x[ib]&&!y[ib]);j.conditionClass(hb,'noSubscribeCheckbox',!t[ib]&&!x[ib]);ab(hb,ib,u[ib]);db(hb,ib,v[ib]);h.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],function(lb,mb){ab(hb,ib,true);}.bind(this));h.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],function(lb,mb){h.inform('SubMenu/Reset');ab(hb,ib,false);}.bind(this));h.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],function(lb,mb){db(hb,ib,true);}.bind(this));h.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],function(lb,mb){db(hb,ib,false);}.bind(this));h.subscribe('listeditor/friend_lists_changed',function(lb,mb){if(mb.notify_state){var nb=mb.added_uid?mb.added_uid:mb.removed_uid;db(hb,nb,mb.notify_state.is_notified);}}.bind(this));bb(hb,false);},getSubscriptions:function(hb){return {level:z[hb],custom_categories:aa[hb]};},setSubscriptions:function(hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb){xa(hb,nb+'');t[hb]=ib;u[hb]=jb;w[hb]=kb;x[hb]=lb;y[hb]=mb;ba[hb]=pb+'';aa[hb]=ob.map(String);ca[hb]=qb.map(String);ga[hb]=tb;v[hb]=rb;ja=sb;}};e.exports=a.EditSubscriptions||gb;});
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],function(a,b,c,d){a.SubscriptionLevels=b('SubscriptionLevels');a.EditSubscriptions=b('EditSubscriptions');},3);
__d("DynamicFriendListEducation",["Event","Arbiter","AsyncRequest","Dialog","PageTransitions","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Dialog'),k=b('PageTransitions'),l=b('createArrayFrom'),m,n,o,p,q,r;function s(){o&&o.hide();p&&p.hide();}function t(w){n.remove(w);s();q({accept_tag_education:true});}function u(){s();q({nux_cancel:true});}var v={init:function(w,x){m=w;n=l(x).map(String);k.registerHandler(function(){s();m=false;q=undefined;n=[];});},showDialog:function(w,x,y){if(m&&n.contains(w)){s();h.inform('DynamicFriendListEducation/dialogOpen',{uid:x,flid:w});q=y;o=new j().setAsync(new i('/ajax/friends/lists/smart_list_education.php').setMethod('GET').setData({flid:w,uid:x}).setReadOnly(true)).setHandler(t.bind(this,w)).setCloseHandler(function(){h.inform('DynamicFriendListEducation/dialogClosed',{uid:x,flid:w});}).setCancelHandler(function(){h.inform('DynamicFriendListEducation/dialogCancel',{uid:x,flid:w});}).show();}else y();},showContextualDialog:function(w,x,y,z){if(m&&n.contains(w)){s();r=y;q=z;new i('/ajax/friends/lists/smart_list_contextual_education.php').setMethod('GET').setData({flid:w,uid:x}).setReadOnly(true).send();}else z();},setContextualDialog:function(w,x,y,z){p=w;p.setContext(r);p.show();g.listen(x,'click',t.bind(this,z));g.listen(y,'click',u);}};e.exports=v;});
__d("FriendStatus",["array-extensions","function-extensions","Arbiter","AsyncRequest","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){b('array-extensions');b('function-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('copyProperties'),j=b('createArrayFrom');function k(o,p,q){this.id=o;this.update(p,q);}i(k.prototype,{update:function(o,p){o&&(this.status=o);if(p){this.lists=j(p).map(String);this._informListChange();}},isComplete:function(){return !!this.lists;},addToList:function(o){if(this.lists&&!this.lists.contains(o))this.lists.push(o);this._informListChange();},removeFromList:function(o){if(this.lists){var p=this.lists.indexOf(o);p!==-1&&this.lists.splice(p,1);}this._informListChange();},updateList:function(o,p){p?this.addToList(o):this.removeFromList(o);},_informListChange:function(){g.inform('FriendListMembershipChange',{uid:this.id,lists:this.lists});}});i(k,{ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4});var l={},m={};function n(o,p,q){if(!l[q.uid]){l[q.uid]=new k(q.uid,o);}else l[q.uid].update(o);g.inform('FriendRequest/change',{uid:q.uid,status:o});}g.subscribe(['FriendRequest/cancel','FriendRequest/unfriend','FriendRequest/sendFail'],n.curry(k.CAN_REQUEST));g.subscribe(['FriendRequest/confirmFail'],n.curry(k.INCOMING_REQUEST));g.subscribe(['FriendRequest/cancelFail','FriendRequest/sent','FriendRequest/sending'],n.curry(k.OUTGOING_REQUEST));g.subscribe(['FriendRequest/confirm','FriendRequest/confirming'],n.curry(k.ARE_FRIENDS));i(k,{CLOSE_FRIENDS:null,ACQUAINTANCES:null,getFriend:function(o,p){if(l[o]&&l[o].isComplete()){p(l[o]);}else if(m[o]){m[o].push(p);}else{m[o]=[p];new h().setURI("/ajax/friends/status.php").setData({friend:o}).setHandler(function(q){var r=q.getPayload();k.initFriend.bind(k,o,r.status,r.lists).defer();}).send();}},initFriend:function(o,p,q){var r=l[o]||new k(o);r.update(r.status||p,r.lists||q);l[o]=r;m[o]&&m[o].forEach(function(s){s(r);});m[o]=null;},setSpecialLists:function(o){k.CLOSE_FRIENDS=o.close+'';k.ACQUAINTANCES=o.acq+'';}});e.exports=k;});
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","FriendStatus","Menu","Parent","ScrollableArea","URI","$","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOMQuery'),k=b('DynamicFriendListEducation'),l=b('EditSubscriptions'),m=b('FriendStatus'),n=b('Menu'),o=b('Parent'),p=b('ScrollableArea'),q=b('URI'),r=b('$'),s=b('copyProperties'),t=b('ge'),u=5,v={},w='/ajax/profile/removefriendconfirm.php',x='/ajax/friends/requests/cancel.php',y='/ajax/choose/',z='/profile.php',aa;function ba(ma,na,oa){var pa=v[ma.id],qa=function(ra){var sa={action:oa?'add_list':'del_list',to_friend:pa.id,friendlists:[na],source:aa};if(ra)s(sa,ra);pa.updateList(na,oa);var ta;if(oa&&na==m.CLOSE_FRIENDS){ta=ea(ma,m.ACQUAINTANCES);if(n.isItemChecked(ta)){n.toggleItem(ta);ba(ma,m.ACQUAINTANCES,false);}}else if(oa&&na==m.ACQUAINTANCES){ta=ea(ma,m.CLOSE_FRIENDS);if(n.isItemChecked(ta)){n.toggleItem(ta);ba(ma,m.CLOSE_FRIENDS,false);}}var ua={flid:na,uid:pa.id},va=oa?'FriendListHovercard/add':'FriendListHovercard/remove';g.inform(va,ua);new h().setURI('/ajax/add_friend/action.php').setData(sa).send();};if(oa){k.showDialog(na,pa.id,qa);}else qa();}function ca(ma){var na=j.scry(ma,'input')[0];return na&&na.value;}function da(ma,na,oa){var pa={uid:na.id};new h().setURI(x).setMethod('POST').setData({friend:na.id}).setHandler(g.inform.bind(g,'FriendRequest/cancel',pa)).setErrorHandler(g.inform.bind(g,'FriendRequest/cancelFail',pa)).setStatusElement(oa).send();}function ea(ma,na){var oa=n.getItems(ma);for(var pa=0;pa<oa.length;pa++)if(ca(oa[pa])==na)return oa[pa];return null;}function fa(ma,na){var oa=n.getItems(ma);oa.forEach(function(pa){var qa=ca(pa),ra=na.lists.contains(qa);if(n.isItemChecked(pa)!==ra)n.toggleItem(pa);});}function ga(ma){var na=n.getItems(ma),oa=!i.hasClass(ma,'followButtonFlyout')&&!i.hasClass(ma,'likeButtonFlyout'),pa=[],qa=[],ra=0,sa=0;na.forEach(function(xa){if(i.hasClass(xa,'neverHide')){i.removeClass(xa,'underShowMore');ra++;}else if(n.isItemChecked(xa)){pa.push(xa);}else if(i.hasClass(xa,'neverShow')||i.hasClass(xa,'FriendListCreateTrigger')||(!oa&&i.hasClass(xa,'friendOptionsOnly'))){i.addClass(xa,'underShowMore');sa++;}else qa.push(xa);});var ta=u-ra,ua=pa.concat(qa),va=sa;ua.forEach(function(xa){if(i.hasClass(xa,'ShowMoreItem')){ta--;return;}if(ta){i.removeClass(xa,'underShowMore');ta--;}else{i.addClass(xa,'underShowMore');va=true;}});i.conditionClass(ma,'hasMoreFriendListItems',va);var wa=j.scry(ma,'.FriendListMenuShowMore');wa.forEach(function(xa){i.removeClass(xa,'FriendListMenuShowMore');});}function ha(ma,na){i.conditionClass(ma,'FriendListMemorializedUser',na);}function ia(ma,na){i.conditionClass(ma,'FriendListCannotSuggestFriends',!na);}function ja(ma,na){var oa=j.scry(ma,'.FriendListUnfriend')[0],pa=j.scry(ma,'.FriendListCancel')[0],qa=j.scry(ma,'.FriendListSuggestFriends')[0],ra=j.scry(ma,'.FriendListFriendship')[0];if(pa)i.conditionShow(pa,na.status==m.OUTGOING_REQUEST);if(oa){i.conditionShow(oa,na.status==m.ARE_FRIENDS);j.find(oa,'a').setAttribute('ajaxify',q(w).addQueryData({uid:na.id,norefresh:true}).toString());}if(qa)j.find(qa,'a').setAttribute('href',q(y).addQueryData({type:'suggest_friends',newcomer:na.id,ref:'profile_others_dropdown'}).toString());if(ra){i.conditionShow(ra,na.status==m.ARE_FRIENDS);j.find(ra,'a').setAttribute('href',q(z).addQueryData({and:na.id}).toString());}}function ka(ma,na){var oa=j.scry(ma,'div.FriendListSubscriptionsMenu');if(oa.length!==0)l.init(ma,na,45);}g.subscribe('FriendRequest/change',function(ma,na){for(var oa in v){var pa=t(oa),qa=v[oa];if(pa&&qa&&qa.id==na.uid){fa(pa,qa);ja(pa,qa);ga(pa);}}});n.subscribe('select',function(ma,na){if(i.hasClass(na.item,'ShowMoreItem')&&i.hasClass(na.menu,'FriendListMenu')){i.addClass(na.menu,'FriendListMenuShowMore');p.poke(na.item);}});var la={init:function(ma,na,oa,pa,qa){ma=r(ma);aa=oa;if(!v[ma.id])n.subscribe('select',function(ra,sa){if(j.contains(ma,sa.item))if(o.byClass(sa.item,'FriendListItem')){n.toggleItem(sa.item);var ta=ca(sa.item);ba(ma,ta,n.isItemChecked(sa.item));}else if(o.byClass(sa.item,'FriendListCancel')){da(ma,v[ma.id],sa.item);}else if(o.byClass(sa.item,'FriendListUnfriend'))g.inform('FriendEditLists/unfriend');});i.addClass(ma,'async_saving');m.getFriend(na,function(ra){ha(ma,pa);ia(ma,qa);fa(ma,ra);ja(ma,ra);v[ma.id]=ra;ga(ma);ka(ma,na);i.removeClass(ma,'async_saving');}.bind(this));}};e.exports=a.FriendEditLists||la;});
__d("FriendListFlyoutController",["Event","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","Dialog","DOM","DOMQuery","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","Menu","Parent","ScrollableArea","Style","TabbableElements","UserAgent","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Button'),k=b('ContextualLayer'),l=b('CSS'),m=b('DataStore'),n=b('Dialog'),o=b('DOM'),p=b('DOMQuery'),q=b('FriendEditLists'),r=b('FriendStatus'),s=b('Keys'),t=b('Layer'),u=b('LayerHideOnEscape'),v=b('LayerTabIsolation'),w=b('Menu'),x=b('Parent'),y=b('ScrollableArea'),z=b('Style'),aa=b('TabbableElements'),ba=b('UserAgent'),ca=b('emptyFunction'),da,ea,fa=null,ga=null,ha,ia,ja,ka,la,ma,na=1500,oa={init:function(ob){oa.init=ca;da=ob;da.subscribe('mouseenter',xa);da.subscribe('mouseleave',jb);da.subscribe('hide',ya);da.enableBehavior(v);da.enableBehavior(u);if(fa)o.setContent(da.getContent(),[fa,ga]);var pb=function(qb){var rb=x.byClass(qb.getTarget(),'enableFriendListFlyout');if(rb)if(ha===rb){clearTimeout(ka);}else{ea&&lb();ib(rb);}};g.listen(document.documentElement,{mouseover:pb,click:pb,keydown:function(event){var qb=event.getTarget();if(event.getModifiers().any)return;if(!ea||p.isNodeOfType(qb,['input','textarea']))return;var rb=g.getKeyCode(event),sb;switch(rb){case s.UP:case s.DOWN:var tb=wa();sb=ua(tb);sa(tb[sb+(rb===s.UP?-1:1)]);return false;case s.SPACE:var ub=ta(qb);if(ub){pa(ub);event.prevent();}break;default:var vb=String.fromCharCode(rb).toLowerCase(),wb=wa();sb=ua(wb);var xb=sb,yb=wb.length;while((~sb&&(xb=++xb%yb)!==sb)||(!~sb&&++xb<yb)){var zb=w.getItemLabel(wb[xb]);if(zb&&zb.charAt(0).toLowerCase()===vb){sa(wb[xb]);return false;}}}}});h.subscribe('FriendEditLists/unfriend',lb);h.subscribe('DynamicFriendListEducation/dialogOpen',function(){ma=true;});h.subscribe('DynamicFriendListEducation/dialogClosed',function(){ma=false;jb();});},initContent:function(ob){o.appendContent(document.body,ob);za(ob);(function(){if(!fa){fa=ob;da&&o.setContent(da.getContent(),[fa,ga]);l.show(fa);g.listen(fa,'click',mb);ea&&fb(ha);}else{o.remove(ob);ob=null;}}).defer();},initNux:function(ob){if(ga)return;ga=ob;da&&o.setContent(da.getContent(),[fa,ga]);},show:function(ob){gb(ob);},hide:function(ob){ob===false?lb():jb();},setActiveNode:function(ob){ea&&lb();ha=ob;ia=g.listen(ob,'mouseleave',function(){ha=null;ia&&ia.remove();});},setCloseListener:function(ob,pb){m.set(ob,'flfcloselistener',pb);if(ha!=ob)m.set(ob,'flfcloselistenertimeout',nb.curry(ob).defer(na));},setCloseListenerTimeout:function(ob){na=ob;}};function pa(ob){ba.firefox()&&ra(ob).blur();w.inform('select',{menu:qa(ob),item:ob});}function qa(ob){if(l.hasClass(ob,'uiMenuContainer'))return ob;return x.byClass(ob,'uiMenu');}function ra(ob){return p.find(ob,'a.itemAnchor');}function sa(ob){if(ob&&va(ob)){w._removeSelected(da.getContent());l.addClass(ob,'selected');ra(ob).focus();}}function ta(ob){return x.byClass(ob,'uiMenuItem');}function ua(ob){if(document.activeElement){var pb=ta(document.activeElement);return ob.indexOf(pb);}return -1;}function va(ob){return !l.hasClass(ob,'disabled')&&z.get(ob,'display')!=='none'&&z.get(x.byClass(ob,'uiMenu'),'display')!=='none';}function wa(){return w.getItems(da.getContent()).filter(va);}function xa(){clearTimeout(ka);}function ya(){if(ha){l.removeClass(ha,'selected');l.removeClass(ha,'uiButtonHover');if(m.get(ha,'flfcloselistener')){var ob=ha;m.set(ha,'flfcloselistenertimeout',nb.curry(ob).defer(na));}}ea=false;eb();ha=null;}function za(ob){var pb=p.scry(ob,'[tabindex="0"]');pb.forEach(function(qb){qb.tabIndex='-1';});pb[0]&&(pb[0].tabIndex='0');}function ab(ob){if(p.isNodeOfType(ob,'label')&&l.hasClass(ob,'uiButton'))ob=j.getInputElement(ob);return ob;}function bb(ob){return m.get(ab(ob),'profileid');}function cb(ob){return m.get(ab(ob),'memorialized')==='true';}function db(ob){return m.get(ab(ob),'cansuggestfriends')==='true';}function eb(){ia&&ia.remove();ia=null;la&&t.unsubscribe(la);la=null;ka&&clearTimeout(ka);ka=null;}function fb(ob){var pb=bb(ob),qb=cb(ob),rb=db(ob),sb=m.get(ob,'flloc');q.init(fa,pb,sb,qb,rb);l.conditionClass(fa,'followButtonFlyout',l.hasClass(ob,'profileFollowButton'));l.conditionClass(fa,'friendButtonFlyout',l.hasClass(ob,'FriendRequestFriends')||l.hasClass(ob,'FriendRequestIncoming')||l.hasClass(ob,'FriendRequestOutgoing'));l.conditionClass(fa,'likeButtonFlyout',l.hasClass(ob,'profileLikeButton'));var tb=p.scry(fa,'div.uiScrollableArea')[0];tb&&y.poke(tb);var ub=aa.find(fa)[0];ub&&ub.focus();}function gb(ob){if(!da||ea)return;da.setContext(ob);da.setCausalElement(ob);ob.setAttribute('aria-expanded','true');l.addClass(ob,'selected');l.addClass(ob,'uiButtonHover');da.show();ha=ob;ea=true;if(fa){fb(ob);}else new i().setURI('/ajax/friends/lists/flyout_content.php').setStatusElement(da.getContent()).send();eb();ia=g.listen(ob,'mouseleave',jb);la=t.subscribe('show',hb);if(m.get(ob,'flfcloselistener'))clearTimeout(m.remove(ob,'flfcloselistenertimeout'));var pb=bb(ob);r.getFriend(pb,function(qb){if(!ga)return;if(qb.status==r.OUTGOING_REQUEST){l.show(ga);i.bootstrap('/ajax/friends/lists/nux_flyout.php',null,true);}else l.hide(ga);});}function hb(ob,pb){if(!(pb instanceof k)||!p.contains(ha,pb.getContext()))jb();}function ib(ob){ha=ob;ja=gb.curry(ob).defer(350);ia=g.listen(ob,'mouseleave',function(){clearTimeout(ja);ha=null;ia&&ia.remove();});}function jb(){ka=lb.defer(150);}function kb(){var ob=n.getCurrent(),pb=ob&&ob.getBody();return !!(pb&&p.scry(pb,'.friendListDialogTourCarousel')[0]);}function lb(){if(ma||kb())return;ba.ie()<8&&document.documentElement.focus();if(da){da.hide();var ob=da.getCausalElement();ob&&ob.setAttribute('aria-expanded','false');}}function mb(event){var ob=x.byTag(event.getTarget(),'a');if(ob&&l.hasClass(ob,'FriendListActionItem'))jb();}function nb(ob){var pb=m.remove(ob,'flfcloselistener');pb&&pb();}e.exports=a.FriendListFlyoutController||oa;});
__d("SubscriptionFlyoutController",["Arbiter","CSS","DataStore","EditSubscriptions","Hovercard","HoverFlyout","$","emptyFunction"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('EditSubscriptions'),k=b('Hovercard'),l=b('HoverFlyout'),m=b('$'),n=b('emptyFunction'),o=null,p,q,r;function s(){var w=j.getSubscriptions(r);if(w){var x=w.custom_categories;if(x&&x.length===0)g.inform('UnfollowUser',{profile_id:r,from_hide_flyout:true});}}function t(w,x){r=i.get(x,'profile_id');var y=i.get(x,'loc');j.init(q,r,y);h.addClass(x,'selected');h.addClass(x,'uiButtonHover');if(i.get(x,'onclose'))clearTimeout(i.remove(x,'onclosetimeout'));}function u(w,x){r=null;h.removeClass(x,'selected');h.removeClass(x,'uiButtonHover');if(i.get(x,'onclose'))i.set(x,'onclosetimeout',function(){var y=i.remove(x,'onclose');y&&y();}.defer(1500));}var v={init:function(w,x){v.init=n;p=w;q=m(x);o=new l();o.init(w);o.setShowDelay(100).setHideDelay(150);o.subscribe('show',t);o.subscribe('hide',u);g.subscribe(['UnfollowUser','UnfollowingUser'],function(y,z){if(!z.from_hide_flyout&&z.profile_id==r){if(k.contains&&p)if(k.contains(p.getContext()))k.hide();o.hideFlyout(true);}});},initNode:function(w,x,y){i.set(w,'profile_id',x);i.set(w,'loc',y);o.initNode(w);},setActiveNode:function(w){o.setActiveNode(w);},show:function(w){o.showFlyout(w,true);},setCloseListener:function(w,x){if(o.getActiveNode()!==w){x();}else i.set(w,'onclose',x);}};e.exports=a.SubscriptionFlyoutController||v;});
__d("FollowButton",["Event","Arbiter","AsyncRequest","Button","CSS","DOM","FriendListFlyoutController","SubscriptionFlyoutController","SubscriptionLevels","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('Button'),k=b('CSS'),l=b('DOM'),m=b('FriendListFlyoutController'),n=b('SubscriptionFlyoutController'),o=b('SubscriptionLevels'),p=b('URI'),q=b('copyProperties'),r=14;function s(w,x,y){k.conditionShow(x,y);k.conditionShow(w,!y);}function t(w,x){if(x&&k.hasClass(w,'enableFriendListFlyout')){m.show(w);}else m.hide();}function u(w,x,y){var z=l.scry(w,'.lowIcon')[0],aa=l.scry(w,'.medIcon')[0],ba=l.scry(w,'.highIcon')[0];if(!z||!aa||!ba)return;h.subscribe('SubscriptionLevelUpdated',function(ca,da){if(y===da.profile_id)switch(da.level){case o.ALL:j.setIcon(x,ba);break;case o.DEFAULT:j.setIcon(x,aa);break;case o.TOP:j.setIcon(x,z);break;}});}function v(w,x,y,z,aa,ba){this.init(w,x,y,z,aa,ba);}q(v.prototype,{init:function(w,x,y,z,aa,ba){if(!k.hasClass(y,'enableFriendListFlyout'))n.initNode(y,z,aa);if(aa==r&&k.shown(y))n.show(y);g.listen(x,'click',function(){s(x,y,true);n.setActiveNode(y);var ea=new p(x.getAttribute('ajaxify')),fa={profile_id:z,location:aa,source:'follow-button',subscribed_button_id:y.id,xids:ea.getQueryData().xids};new i().setURI(ba).setData(fa).setRelativeTo(y).send();});w&&u(w,y,z);h.subscribe(['FollowUser','FollowingUser','UnfollowUser','UnfollowingUser'],function(ea,fa){if(fa.profile_id==z)s(x,y,ea=='FollowUser'||ea=='FollowingUser');t(y,ea=='FollowUser');});var ca=false;h.subscribe('UnfollowingUser',function(ea,fa){if(fa.profile_id==z){ca=k.shown(y);ca&&s(x,y,false);}});h.subscribe('UnfollowUserFail',function(ea,fa){if(fa.profile_id==z&&ca)s(x,y,true);});h.subscribe('FollowUserFail',function(ea,fa){if(fa.profile_id==z&&ca)s(x,y,false);});var da=false;h.subscribe(['FriendRequest/sending','FriendRequest/confirming'],function(ea,fa){if(fa.uid==z){da=k.shown(x);da&&s(x,y,true);}});h.subscribe(['FriendRequest/sendFail','FriendRequest/confirmFail'],function(ea,fa){if(fa.uid==z&&da)s(x,y,false);});h.subscribe('FriendRequest/unfriend',function(ea,fa){(fa.uid==z)&&s(x,y,false);});}});e.exports=a.FollowButton||v;});
__d("AddFriendButton",["Event","Animation","Arbiter","AsyncRequest","AsyncResponse","collectDataAttributes","CSS","DOMQuery","FriendListFlyoutController","FriendStatus","ge","goURI","Style","URI"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('AsyncResponse'),l=b('collectDataAttributes'),m=b('CSS'),n=b('DOMQuery'),o=b('FriendListFlyoutController'),p=b('FriendStatus'),q=b('ge'),r=b('goURI'),s=b('Style'),t=b('URI'),u={ERROR_ALREADY_ADDED:1431005,init:function(v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=v.id,ha=null,ia=n.scry(v,'.addButton')[0],ja=n.scry(v,'.addFriendText')[0],ka=n.scry(v,'.outgoingButton')[0],la=n.scry(v,'.incomingButton')[0],ma=n.scry(v,'.friendButton')[0];function na(ta,ua,va){var wa=new t(ia.getAttribute('ajaxify')),xa=l(v,['ft','gt']);new j().setURI(aa).setData({to_friend:w,action:ta,how_found:y,ref_param:z,link_data:xa,outgoing_id:ka.id,xids:wa.getQueryData().xids,logging_location:ba,no_flyout_on_click:ca,ego_log_data:da,http_referer:fa}).setErrorHandler(ua).setServerDialogCancelHandler(va).setRelativeTo(ka).send();}function oa(ta,ua){if(ja){m.hide(ja);}else if(ia)m.hide(ia);ka&&m.hide(ka);la&&m.hide(la);ma&&m.hide(ma);if(ta)m.show(ta);if('Outgoing'==ua&&ha!=ua&&ea)h(ta).from('backgroundColor','#FFF8CC').to('backgroundColor','transparent').from('borderColor','#FFE222').to('borderColor',s.get(ta,'borderLeftColor')).duration(2000).go();ha&&m.removeClass(v,'fStatus'+ha);ha=ua;m.addClass(v,'fStatus'+ua);}function pa(ta){if(m.hasClass(ta,'enableFriendListFlyout')){o.show(ta);}else o.hide();}var qa=i.subscribe('FriendRequest/change',function(ta,ua){sa();if(ua.uid!=w)return;switch(ua.status){case p.ARE_FRIENDS:return oa(ma,'Friends');case p.INCOMING_REQUEST:return oa(la,'Incoming');case p.OUTGOING_REQUEST:return oa(ka,'Outgoing');case p.CAN_REQUEST:return oa(ja?ja:ia,'Requestable');}}),ra;if(x)ra=i.subscribe('FriendRequest/confirm',function(ta,ua){sa();ua.uid==w&&r(x);});ia&&g.listen(ia,'click',function(){i.inform('FriendRequest/sending',{uid:w});if(ca){o.setActiveNode(ka);}else pa(ka);na("add_friend",function(ta){var ua=ta.error==u.ERROR_ALREADY_ADDED?'FriendRequest/sent':'FriendRequest/sendFail';i.inform(ua,{uid:w});o.hide();k.defaultErrorHandler(ta);},function(ta){i.inform('FriendRequest/sendFail',{uid:w});o.hide();});});function sa(){if(q(ga))return;qa&&qa.unsubscribe();ra&&ra.unsubscribe();qa=ra=null;}}};e.exports=u;});
__d("legacy:FriendStatus",["FriendStatus"],function(a,b,c,d){a.FriendStatus=b('FriendStatus');},3);
__d("FriendButtonIcon",["Arbiter","FriendStatus","Button"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('FriendStatus'),i=b('Button');e.exports={register:function(j,k,l){g.subscribe('FriendListMembershipChange',function(m,n){if(n.uid==l){var o=n.lists.contains(h.CLOSE_FRIENDS),p=n.lists.contains(h.ACQUAINTANCES);if(o&&!p){i.setIcon(j,k.close);}else if(p&&!o){i.setIcon(j,k.acquaintance);}else i.setIcon(j,k.friend);}});}};});
__d("legacy:friend-browser-checkbox-js",["FriendBrowserCheckboxController"],function(a,b,c,d){a.FriendBrowserCheckboxController=b('FriendBrowserCheckboxController');},3);
__d("MessageButton",["Event","Chat","MercuryConstants","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Chat'),i=b('MercuryConstants'),j=b('copyProperties');function k(){}j(k,{initChat:function(l,m,n){g.listen(l,'click',function(){h.openTab(m,n,i.MercuryParticipantTypes.FRIEND);return false;});}});e.exports=k;});
__d("legacy:onvisible",["OnVisible"],function(a,b,c,d){a.OnVisible=b('OnVisible');},3);